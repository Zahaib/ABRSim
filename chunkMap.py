#!/usr/bin/python

sizeDict = {3585: {0: 1765884, 1: 2106916, 2: 1921736, 3: 1880376, 4: 2248668, 5: 1957456, 6: 1643872, 7: 1590292, 8: 1651204, 9: 1233468, 10: 990948, 11: 2267468, 12: 2231184, 13: 1385560, 14: 975532, 15: 585244, 16: 2462800, 17: 2294916, 18: 1788256, 19: 2269536, 20: 1452300, 21: 1963284, 22: 1807432, 23: 2232688, 24: 1953696, 25: 2044688, 26: 1781300, 27: 2065932, 28: 1575252, 29: 1609092, 30: 1487080, 31: 2446444, 32: 1714184, 33: 2195840, 34: 2314656, 35: 1805364, 36: 2456408, 37: 1421468, 38: 1656280, 39: 2127972, 40: 2368048, 41: 1992612, 42: 1249072, 43: 1655904, 44: 1510204, 45: 2202232, 46: 1689180, 47: 2029084, 48: 1388004, 49: 2173468, 50: 2078528, 51: 2231560, 52: 2283260, 53: 2366356, 54: 2220468, 55: 2099772, 56: 2182304, 57: 2299240, 58: 1360744, 59: 2448888, 60: 1825668, 61: 2330448, 62: 2239268, 63: 2352256, 64: 2294540, 65: 2244720, 66: 2343420, 67: 2221596, 68: 2158052, 69: 1876616, 70: 1866652, 71: 1948808, 72: 2304504, 73: 452140}, 1434: {0: 519820, 1: 653488, 2: 609308, 3: 667964, 4: 980044, 5: 748240, 6: 658752, 7: 772492, 8: 681876, 9: 653676, 10: 565504, 11: 898452, 12: 940000, 13: 680936, 14: 554412, 15: 321480, 16: 956356, 17: 947520, 18: 782644, 19: 910108, 20: 694472, 21: 625476, 22: 635440, 23: 933796, 24: 849760, 25: 697856, 26: 637320, 27: 789224, 28: 628860, 29: 778132, 30: 737900, 31: 983428, 32: 783584, 33: 951092, 34: 908980, 35: 690336, 36: 974780, 37: 658752, 38: 756700, 39: 937932, 40: 924960, 41: 844684, 42: 639012, 43: 810656, 44: 706128, 45: 932480, 46: 739968, 47: 816484, 48: 526964, 49: 863860, 50: 821936, 51: 936428, 52: 868748, 53: 984932, 54: 916312, 55: 805956, 56: 819116, 57: 932292, 58: 617204, 59: 974592, 60: 644276, 61: 929660, 62: 920072, 63: 916124, 64: 923268, 65: 909732, 66: 945076, 67: 926088, 68: 895256, 69: 823064, 70: 747112, 71: 889804, 72: 903340, 73: 173148}, 2738: {0: 1271820, 1: 1593488, 2: 1331980, 3: 1359052, 4: 1769080, 5: 1467528, 6: 1351156, 7: 1257156, 8: 1275204, 9: 1039828, 10: 844120, 11: 1702528, 12: 1770772, 13: 1130632, 14: 801256, 15: 493500, 16: 1824164, 17: 1734864, 18: 1457000, 19: 1744452, 20: 1148680, 21: 1439328, 22: 1350028, 23: 1731668, 24: 1519228, 25: 1539156, 26: 1362812, 27: 1591044, 28: 1150936, 29: 1247568, 30: 1142100, 31: 1869284, 32: 1325024, 33: 1716064, 34: 1747836, 35: 1413384, 36: 1880940, 37: 1103372, 38: 1265992, 39: 1670380, 40: 1773592, 41: 1522988, 42: 1017080, 43: 1304344, 44: 1156952, 45: 1700460, 46: 1247756, 47: 1548368, 48: 1018960, 49: 1654964, 50: 1527500, 51: 1754604, 52: 1667748, 53: 1845972, 54: 1710236, 55: 1479184, 56: 1571304, 57: 1758364, 58: 1052612, 59: 1875112, 60: 1351908, 61: 1791264, 62: 1685984, 63: 1785436, 64: 1730728, 65: 1707228, 66: 1793332, 67: 1720388, 68: 1693316, 69: 1537276, 70: 1378416, 71: 1529756, 72: 1751596, 73: 360396}, 4661: {0: 2308828, 1: 2617336, 2: 2483480, 3: 2372372, 4: 2870196, 5: 2565448, 6: 2072700, 7: 2081160, 8: 2203548, 9: 1715500, 10: 1248696, 11: 2895764, 12: 2946900, 13: 1765132, 14: 1301336, 15: 754820, 16: 3192052, 17: 2986192, 18: 2203172, 19: 2948780, 20: 1830180, 21: 2845004, 22: 2524464, 23: 2751756, 24: 2617524, 25: 2672796, 26: 2233064, 27: 2713968, 28: 2093380, 29: 2034536, 30: 1960464, 31: 3156144, 32: 2386096, 33: 2941072, 34: 2989576, 35: 2364664, 36: 3165544, 37: 1940536, 38: 2206180, 39: 2849140, 40: 3040336, 41: 2563568, 42: 1661544, 43: 2163504, 44: 2115000, 45: 2862864, 46: 2272356, 47: 2602672, 48: 1861952, 49: 2804772, 50: 2832784, 51: 2896516, 52: 2937688, 53: 3078312, 54: 2900088, 55: 2767548, 56: 2700244, 57: 2946900, 58: 1721516, 59: 3201640, 60: 2327440, 61: 3078876, 62: 2903848, 63: 2992584, 64: 2992772, 65: 2873204, 66: 3041840, 67: 2881100, 68: 2715660, 69: 2159556, 70: 2162940, 71: 2353948, 72: 3012888, 73: 537304}, 5885: {0: 2945020, 1: 3278156, 2: 3257852, 3: 3193932, 4: 3462584, 5: 3168928, 6: 2878844, 7: 2645536, 8: 2698928, 9: 2057848, 10: 1448916, 11: 3583656, 12: 3593620, 13: 2117256, 14: 1524304, 15: 914056, 16: 3921680, 17: 3679160, 18: 2736528, 19: 3505636, 20: 2305632, 21: 3735748, 22: 3176824, 23: 3329480, 24: 3182464, 25: 3324028, 26: 2841244, 27: 3433068, 28: 2651740, 29: 2483668, 30: 2414108, 31: 3872048, 32: 2924340, 33: 3551132, 34: 3756616, 35: 3013452, 36: 3938600, 37: 2338156, 38: 2779392, 39: 3446604, 40: 3750600, 41: 3155768, 42: 1962908, 43: 2592708, 44: 2534992, 45: 3502064, 46: 2724872, 47: 3241496, 48: 2362596, 49: 3499432, 50: 3343768, 51: 3784440, 52: 3540604, 53: 3778424, 54: 3580460, 55: 3339068, 56: 3349596, 57: 3653404, 58: 2125528, 59: 3968680, 60: 2829024, 61: 3741576, 62: 3555268, 63: 3712624, 64: 3559404, 65: 3343768, 66: 4042000, 67: 3332300, 68: 3047292, 69: 2445504, 70: 2468440, 71: 2685204, 72: 3710556, 73: 570392}, 1002: {0: 394988, 1: 465676, 2: 437100, 3: 444432, 4: 682816, 5: 532228, 6: 433340, 7: 531476, 8: 492184, 9: 461352, 10: 411532, 11: 637320, 12: 672852, 13: 484852, 14: 411908, 15: 256432, 16: 654428, 17: 665708, 18: 563812, 19: 642208, 20: 496884, 21: 434468, 22: 449132, 23: 643336, 24: 606676, 25: 471692, 26: 446688, 27: 554788, 28: 463608, 29: 542192, 30: 580732, 31: 688644, 32: 590320, 33: 670032, 34: 633748, 35: 503088, 36: 676424, 37: 476768, 38: 544260, 39: 667964, 40: 652548, 41: 586748, 42: 515308, 43: 589192, 44: 530160, 45: 660444, 46: 536928, 47: 554600, 48: 378820, 49: 610436, 50: 575844, 51: 660444, 52: 619272, 53: 680372, 54: 653300, 55: 518880, 56: 567760, 57: 656872, 58: 484288, 59: 682252, 60: 444432, 61: 664204, 62: 658752, 63: 642772, 64: 638072, 65: 645968, 66: 671536, 67: 644464, 68: 639576, 69: 580920, 70: 570956, 71: 613820, 72: 684884, 73: 128780}}





## function returns the dynamic value of the reservoir
#def dynamicReservoir(bw, chunkid, X, reservoir, CHUNKSIZE, bitrate, candidateBitRate):
#  if chunkid > len(sizeDict[candidateBitRate[0]]) - X / CHUNKSIZE:
#    return reservoir
#  bufAdded = 0
#  timeAccumulated = 0.0
#  while ((sizeDict[bitrate][chunkid] / 1000.0) * CHUNKSIZE) / float(bw) + timeAccumulated < X:
#    chunkid += 1
#    timeAccumulated += ((sizeDict[bitrate][chunkid] / 1000.0) * CHUNKSIZE) / float(bw)
##    print timeAccumulated
#    bufAdded += CHUNKSIZE
#  print "bufAdded: " + str(bufAdded)
#  ret = max(X - bufAdded, 2)
#  return ret
#
#candidateBitRate = [1434,2738,3585,4661,5885]
#print dynamicReservoir(2500, 10, 25, 15, 5, 1434, candidateBitRate)
#print dynamicReservoir(2500, 10, 25, 15, 5, 2738, candidateBitRate)
#print dynamicReservoir(2500, 10, 25, 15, 5, 3585, candidateBitRate)
#print dynamicReservoir(2500, 10, 25, 15, 5, 4661, candidateBitRate)
#print dynamicReservoir(500, 65, 25, 17, 5, 5885, candidateBitRate)
